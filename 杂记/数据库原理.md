---
author: "李昌"
title: "数据库原理"
date: "2021-03-18"
tags: ["数据库原理"]
categories: ["杂记"]
ShowToc: true
TocOpen: true
---


## 1. 数据库系统的结构抽象
### 1.1 三级模式(三级视图)
1. External Schema ----（External）View
   某一用户能看到与处理的数据的结构描述
2. (Conceptual) Schema ---- Conceptual View
   从全局角度理解/管理的数据的结构描述, 含相应的关联约束。体现在数据之间的内在本质联系
3. Internal Schema ---- Internal View
   存储在介质上的数据的结构描述，含存储路径、存储方式 、索引方式等

### 1.2 两层映像
1. E-C Mapping：External Schema-Conceptual Schema Mapping
   将外模式映射为概念模式，从而支持实现数据概念视图向外部视图的转换，便于用户观察和使用
2. C-I Mapping：Conceptual Schema-Internal Schema Mapping
   将概念模式映射为内模式，从而支持实现数据概念视图向内部视图的转换，便于计算机进行存储和处理

### 1.3 两个独立性
1. 逻辑数据独立性
   当概念模式变化时，可以不改变外部模式(只需改变E-C Mapping)，从而无需 改变应用程序
2. 物理数据独立性
   当内部模式变化时，可以不改变概念模式(只需改变C-I Mapping) ，从而不改 变外部模式

### 1.4 数据模型
- 数据模型
  - 规定模式统一描述方式的模型，包括：数据结构、操作和约束   
  - 数据模型是对模式本身结构的抽象，模式是对数据本身结构形式的抽象
- 三大经典数据模型
  - 关系模型：**表**的形式组织数据
  - 层次模型：**树**的形式组织数据
  - 网状模型：**图**的形式组织数据

## 2. 关系模型的基本概念
### 2.1 关系模型的三个要素
1. 基本结构
   > 形象地说，一个关系(relation)就是一个Table
   Relation/Table
2. 基本操作
   > 基本的
   - 并：$\cup$
   - 差：$-$
   - 广义积：$\times$
   - 选择: $\delta$
   - 投影：$\pi$
   > 扩展的
   - 交: $\cap$
   - 连接: $\Join$
   - 除：$\div$
3. 完整性约束
   实体完整性、参照完整性和用户自定义的完整性

### 2.2 什么是关系
**关系**
笛卡尔积中具有某一方面意义的那些元组被称作一个关系
> 笛卡尔积的数学描述： 
$$
一组域D_1, D_2, ... , D_n的笛卡尔积为：
D_1 \times D_2 \times \cdots \times D_n = \{(d_1, d_2, \cdots, d_n)| d_i\in D_i, i=1, \cdots , n \}
$$

### 2.3 关系模式与关系
- 同一关系模式下，可有很多的关系 
- 关系模式是关系的结构, 关系是关系模式在某一时刻的数据 
- 关系模式是稳定的；而关系是某一时刻的值，是随时间可能变化的  

### 2.4 关系与表的异同
大部分方面都是相同的，但**关系中任意两个元组不能完全相同**，而表可能并不完全遵守此特性

### 2.5 关系的特性
1. 关系的任意两个元组不能完全相同
2. 属性不可再分特性:又被称为关系第一范式

### 2.6 关系上的一些重要概念
**候选码/候选键**
关系中的一个属性组，其值能唯一标识一个元组，若从该属性组中去掉任何一个属性，它就不具有这一性质了，这样的属性组称作候选码。

**主码/主键**
当有多个候选码时，可以选定一个作为主码。

**主属性和非主属性**
包含在任何一个候选码中的属性被称作主属性，而其他属性被称作非主属性
> 最简单的，候选码只包含一个属性
> 最极端的，所有属性构成这个关系的候选码，称为全码(All-Key)

**外码/外键**
关系R中的一个属性组，它不是R的候选码，但它与另一个关系S的候选 码相对应，则称这个属性组为R的外码或外键。
> 两个关系通常是靠外码连接起来的。

### 2.3 关系模型的完整性
1. 实体完整性
   关系的主码中的属性值不能为空值；
   *空值：不知道或无意义的值*
   *意义：关系中的元组对应到现实世界相互之间可区分的一个个个 体，这些个体是通过主码来唯一标识的；若主码为空，则出现不可标识 的个体，这是不容许的*

2. 参照完整性（对外码而言）
   如果关系R1的外码Fk与关系R2的主 码Pk相对应，则R1中的每一个元组的 Fk值或者等于R2 中某个元组的Pk 值， 或者为空值

3. 用户自定义完整性
   用户针对具体的应用环境定义的完整性约束条件

* 实体完整性和参照完整性由DBMS系统自动支持
* DBMS系统通常提供了如下机制：
  * (1)它使用户可以自行定义有关的完整性约束条件 
  * (2)当有更新操作发生时，DBMS将自动按照完整性约束条件检验更新操作的正确性，即是否符合用户自定义的完整性

**未完待续**